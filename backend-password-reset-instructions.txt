## Password Reset Implementation Guide

### Current Implementation
We've updated the frontend to support a complete password reset flow, but the API endpoints need to be implemented or fixed on the backend. Our frontend expects the following API endpoints to work:

### Required API Endpoints

1. **Password Reset Request** - `POST /api/password/email`
   - **Request Payload**: 
     ```json
     {
       "email": "user@example.com",
       "redirect_url": "https://moondex.nl/password-reset"
     }
     ```
   - **Expected Response (Success)**:
     ```json
     {
       "status": "success",
       "message": "Password reset link has been sent to your email"
     }
     ```
   - **Notes**: The email sent should include a link in the format `{redirect_url}/{id}/{token}`

2. **Token Validation** - `GET /api/password/validate-token/{id}/{token}`
   - **Request**: GET request with ID and token in URL
   - **Expected Response (Success)**:
     ```json
     {
       "status": "success",
       "valid": true
     }
     ```
   - **Expected Response (Error)**:
     ```json
     {
       "status": "error",
       "message": "Token is invalid or has expired"
     }
     ```

3. **Password Reset Confirmation** - `POST /api/password/confirm/{id}/{token}`
   - **Request Payload**:
     ```json
     {
       "password": "newPassword123",
       "password_confirmation": "newPassword123"
     }
     ```
   - **Expected Response (Success)**:
     ```json
     {
       "status": "success",
       "message": "Password has been reset successfully"
     }
     ```
   - **Expected Response (Error)**:
     ```json
     {
       "status": "error", 
       "message": "Token is invalid or has expired",
       "errors": {
         "password": ["Password must be at least 8 characters"]
       }
     }
     ```

### Email Template
The password reset email should use the following structure:

```html
<p>You are receiving this email because we received a password reset request for your account.</p>

<p>Click the button below to reset your password:</p>

<a href="{{ $resetUrl }}" style="display: inline-block; background-color: #8A3F3F; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px;">Reset Password</a>

<p>This password reset link will expire in 60 minutes.</p>

<p>If you did not request a password reset, no further action is required.</p>
```

Where `$resetUrl` should be:
```
{{ frontendUrl }}/password-reset/{{ userId }}/{{ resetToken }}
```

### Environment Configuration
The email template should use an environment variable to determine the correct base URL:

```
FRONTEND_URL=https://moondex.nl  # For production
FRONTEND_URL=http://localhost:3000  # For development
```

### Security Considerations
1. Token should expire after a reasonable time (60 minutes recommended)
2. Tokens should be one-time use only
3. Rate limiting should be implemented to prevent abuse
4. IP-based throttling for multiple failed attempts
5. Validate password complexity requirements

### Implementation Notes
- For development/testing, the frontend will simulate success responses when `NODE_ENV` is set to `development`
- The API endpoints should return appropriate HTTP status codes (422 for validation errors, 500 for server errors, etc.)
- All responses should include a `status` field with either "success" or "error" value
- Error responses should include a descriptive `message` field 